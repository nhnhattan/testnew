<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chụp và Mở Ảnh</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
      #capture-div {
        width: 300px;
        height: 200px;
        background: lightblue;
        text-align: center;
        line-height: 200px;
        font-size: 20px;
      }
      button {
        margin-top: 20px;
        padding: 10px 20px;
        font-size: 16px;
      }
    </style>
  </head>
  <div
    id="capture-div"
    style="width: 300px; height: 200px; background: lightblue;"
  >
    <p>Đây là nội dung cần chụp</p>
  </div>
  <button id="capture-btn">Chụp và tải xuống</button>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

  <script>
        function isWebView() {
        const userAgent = navigator.userAgent || navigator.vendor || window.opera;
        return userAgent.includes("FB") || userAgent.includes("Zalo") || userAgent.includes("Line");
    }
            document.getElementById("capture-btn").addEventListener("click", function () {
            const targetDiv = document.getElementById("capture-div");

            html2canvas(targetDiv).then((canvas) => {
                canvas.toBlob((blob) => {
                  if (isWebView()) {
                      alert("Không thể tải ảnh trên trình duyệt này")
        } else {
            saveAs(blob, "screenshot.png"); // Sử dụng FileSaver.js
        }
                }, "image/png");
            }).catch(err => {
              alert("Không thể chụp ảnh trên trình duyệt này!");
              console.error(err);
            });
        });
  </script>
</html>
